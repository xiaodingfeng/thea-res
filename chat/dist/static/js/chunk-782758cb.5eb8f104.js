(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-782758cb"],{"2f7e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-wrapper"},[t("div",{staticClass:"header-change-ico el-icon-user-solid",attrs:{title:"切换登录方式"},on:{click:e.changeLoginType}}),t("div",{staticClass:"header"},[e._v("AI")]),t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{"auto-complete":"on",placeholder:"邮箱",tabindex:"1",type:"text"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),"password"===e.loginType?t("el-form-item",{staticStyle:{"padding-top":"20px"},attrs:{prop:"password"}},[t("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,"auto-complete":"on",name:"password",placeholder:"密码",tabindex:"2"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[t("span",{staticStyle:{"margin-right":"3px"},attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"},[t("i",{class:"password"===e.passwordType?"el-icon-turn-off":"el-icon-open"})])])],1):e._e(),"captcha"===e.loginType?t("el-form-item",{staticStyle:{"padding-top":"20px"},attrs:{prop:"captcha"}},[t("el-input",{ref:"captcha",attrs:{"auto-complete":"on",name:"captcha",placeholder:"验证码",tabindex:"2"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}},[t("span",{staticStyle:{"margin-right":"3px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v(" | "),t("el-button",{staticStyle:{border:"0"},attrs:{icon:e.captchaDisabled?"":"el-icon-message",disabled:e.captchaDisabled},on:{click:e.sendCaptcha}},[e._v(e._s(e.captchaLabel))])],1)])],1):e._e()],1),t("el-button",{staticClass:"loginBtn",nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[t("b",[e._v("Login")])])],1)])},i=[],o=(a("d9e2"),a("14d9"),a("b976")),n={name:"Login",data(){const e=(e,t,a)=>{t?a():a(new Error("请输入用户名"))},t=(e,t,a)=>{!t||t.length<6?a(new Error("密码不能小于6位")):a()};return{stepsActive:1,imgData:"",loginType:"captcha",captchaLoading:!1,loginForm:{email:"",password:"",captcha:""},loginRules:{email:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}]},loading:!1,passwordType:"password",redirect:void 0,loadingInstance:null,imgReady:!1,clock:"",nums:60,captchaDisabled:!1,captchaLabel:"发送验证码"}},computed:{},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created(){},mounted(){},beforeDestroy(){},methods:{changeLoginType(){this.loginType="password"===this.loginType?"captcha":"password"},doLoop(){this.captchaDisabled=!0,this.nums--,this.nums>0?this.captchaLabel=this.nums+"秒后重新获取":(clearInterval(this.clock),this.captchaDisabled=!1,this.captchaLabel="重新发送验证码",this.nums=60)},sendCaptcha(){this.loginForm.email?Object(o["a"])({email:this.loginForm.email}).then(e=>{200===e.code?this.clock=setInterval(this.doLoop,1e3):this.$message.error(e.msg||"error")}).catch(e=>{this.$message.error(e||"error")}):this.$message.error("邮箱不能为空")},showLoading(){this.closeLoading(),this.loadingInstance=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},closeLoading(){this.loadingInstance&&this.loadingInstance.close()},showPwd(){"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(()=>{this.$refs.password.focus()})},handleLogin(){this.$refs.loginForm.validate(e=>{if(!e)return!1;this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then(e=>{this.$router.push({path:this.redirect||"/"}),this.loading=!1}).catch(e=>{this.$message.error(e),this.loading=!1})})}}},r=n,l=(a("59fb"),a("0c7c")),c=Object(l["a"])(r,s,i,!1,null,"35402643",null);t["default"]=c.exports},"59fb":function(e,t,a){"use strict";a("5b3f")},"5b3f":function(e,t,a){}}]);